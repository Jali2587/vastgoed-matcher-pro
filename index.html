<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vastgoed Matcher Pro AI</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide icons als React components
        const PlusIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Plus, { size, className });
        const UsersIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Users, { size, className });
        const BuildingIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Building, { size, className });
        const StarIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Star, { size, className });
        const MailIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Mail, { size, className });
        const PhoneIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Phone, { size, className });
        const MapPinIcon = ({ size = 20, className = '' }) => React.createElement(lucide.MapPin, { size, className });
        const EuroIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Euro, { size, className });
        const TrendingUpIcon = ({ size = 20, className = '' }) => React.createElement(lucide.TrendingUp, { size, className });
        const AlertCircleIcon = ({ size = 20, className = '' }) => React.createElement(lucide.AlertCircle, { size, className });
        const LogOutIcon = ({ size = 20, className = '' }) => React.createElement(lucide.LogOut, { size, className });
        const UserIcon = ({ size = 20, className = '' }) => React.createElement(lucide.User, { size, className });
        const BrainIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Brain, { size, className });
        const TargetIcon = ({ size = 20, className = '' }) => React.createElement(lucide.Target, { size, className });
        const DollarSignIcon = ({ size = 20, className = '' }) => React.createElement(lucide.DollarSign, { size, className });
        const UserCheckIcon = ({ size = 20, className = '' }) => React.createElement(lucide.UserCheck, { size, className });

        const VastgoedInvesteerderMatcher = () => {
          const [user, setUser] = useState(null);
          const [activeTab, setActiveTab] = useState('dashboard');
          const [investors, setInvestors] = useState([]);
          const [deals, setDeals] = useState([]);
          const [transactions, setTransactions] = useState([]);
          const [users, setUsers] = useState([]);
          const [matches, setMatches] = useState([]);
          const [showAddInvestor, setShowAddInvestor] = useState(false);
          const [showAddDeal, setShowAddDeal] = useState(false);
          const [showAuth, setShowAuth] = useState(true);
          const [authMode, setAuthMode] = useState('login');
          const [aiInsights, setAiInsights] = useState({});
          const [isLoadingAI, setIsLoadingAI] = useState(false);

          // Mock AI call
          const callOpenAI = async (prompt, type = 'analysis', data = null) => {
            setIsLoadingAI(true);
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            const mockResponse = {
              financialStrength: 'Hoog - Stabiele inkomstenbron',
              riskAppetite: 'Gemiddeld tot hoog',
              marketKnowledge: 'Goed - Actief in Nederlandse markt',
              recommendations: 'Geschikt voor deals met stabiele huurinkomsten'
            };
            
            setIsLoadingAI(false);
            return mockResponse;
          };

          // Database functies
          const loadData = async () => {
            setUsers([
              { id: '1', name: 'Jan Vermeer', email: 'jan@example.com', company: 'Vermeer Vastgoed', role: 'agent' },
              { id: '2', name: 'Lisa de Vries', email: 'lisa@example.com', company: 'De Vries Properties', role: 'agent' },
              { id: '3', name: 'Mark Jansen', email: 'mark@example.com', company: 'Jansen Makelaars', role: 'manager' }
            ]);
            
            setInvestors([
              {
                id: '1',
                naam: 'Peter van der Berg',
                email: 'peter@example.com',
                telefoon: '06-12345678',
                bedrijf: 'Berg Investments',
                minBudget: 100000,
                maxBudget: 500000,
                voorkeursRegio: ['Nederland', 'Duitsland'],
                voorkeursLocaties: ['Amsterdam', 'Rotterdam', 'Haarlem'],
                vastgoedTypes: ['Appartement', 'Kantoor'],
                projectTypes: ['Turn-key', 'Renovatie'],
                risicoprofiel: 'Gemiddeld',
                gewenstRendement: 6,
                ervaringLevel: 'Ervaren',
                beschikbaarheid: 'Direct',
                owner_id: '1'
              },
              {
                id: '2',
                naam: 'Maria Jansen',
                email: 'maria@example.com',
                telefoon: '06-87654321',
                bedrijf: 'Jansen Property',
                minBudget: 200000,
                maxBudget: 1000000,
                voorkeursRegio: ['Frankrijk', 'Spanje'],
                voorkeursLocaties: ['Utrecht', 'Den Haag', 'Parijs'],
                vastgoedTypes: ['Appartement', 'Retail', 'Studenten'],
                projectTypes: ['Turn-key', 'Ontwikkeling'],
                risicoprofiel: 'Conservatief',
                gewenstRendement: 4,
                ervaringLevel: 'Beginner',
                beschikbaarheid: '1-3 maanden',
                owner_id: '2'
              }
            ]);
            
            setDeals([
              {
                id: '1',
                titel: 'Modern Appartement Amsterdam',
                locatie: 'Amsterdam',
                type: 'Appartement',
                projectType: 'Turn-key',
                prijs: 350000,
                verwachtRendement: 5.5,
                risico: 'Gemiddeld',
                beschrijving: 'Kant-en-klaar nieuwbouw appartement in Noord',
                oppervlakte: 85,
                status: 'Beschikbaar',
                owner_id: '1'
              },
              {
                id: '2',
                titel: 'Kantoorpand Rotterdam',
                locatie: 'Rotterdam',
                type: 'Kantoor',
                projectType: 'Renovatie',
                prijs: 750000,
                verwachtRendement: 7.2,
                risico: 'Hoog',
                beschrijving: 'Kantoorpand voor renovatie in bedrijventerrein',
                oppervlakte: 400,
                status: 'Beschikbaar',
                owner_id: '2'
              }
            ]);
            
            setTransactions([
              {
                id: '1',
                deal_id: '1',
                investor_id: '1',
                transaction_amount: 350000,
                total_commission: 8750,
                status: 'completed'
              }
            ]);
            
            console.log('Demo data geladen');
          };

          const getUserById = (id) => {
            return users.find(u => u.id === id) || { name: 'Onbekend', email: '' };
          };

          const getInvestorInsights = async (investorId) => {
            const investor = investors.find(i => i.id === investorId);
            const insights = await callOpenAI(`Analyseer: ${investor.naam}`);
            setAiInsights(prev => ({
              ...prev,
              [`investor_${investorId}`]: insights
            }));
          };

          const getDealInsights = async (dealId) => {
            const deal = deals.find(d => d.id === dealId);
            const insights = await callOpenAI(`Analyseer: ${deal.titel}`);
            setAiInsights(prev => ({
              ...prev,
              [`deal_${dealId}`]: insights
            }));
          };

          // Auth functions
          const handleLogin = async (credentials) => {
            const user = {
              id: '1',
              name: credentials.email.split('@')[0],
              email: credentials.email,
              company: 'Vastgoed Ventures BV'
            };
            
            setUser(user);
            setShowAuth(false);
            await loadData();
          };

          const handleLogout = () => {
            setUser(null);
            setShowAuth(true);
            setActiveTab('dashboard');
          };

          useEffect(() => {
            if (user) {
              loadData();
            }
          }, [user]);

          // Matching algorithm
          const calculateMatchScore = (investor, deal) => {
            let score = 0;
            
            // Budget match
            if (deal.prijs >= investor.minBudget && deal.prijs <= investor.maxBudget) {
              score += 30;
            }
            
            // Location match
            if (investor.voorkeursLocaties.includes(deal.locatie)) {
              score += 25;
            }
            
            // Type match
            if (investor.vastgoedTypes.includes(deal.type)) {
              score += 20;
            }
            
            // Project type match
            if (investor.projectTypes.includes(deal.projectType)) {
              score += 15;
            }
            
            // Return match
            if (deal.verwachtRendement >= investor.gewenstRendement) {
              score += 10;
            }
            
            return Math.min(100, score);
          };

          const findMatches = (dealId) => {
            const deal = deals.find(d => d.id === dealId);
            if (!deal) return [];

            return investors.map(investor => ({
              investor,
              deal,
              matchScore: calculateMatchScore(investor, deal)
            })).sort((a, b) => b.matchScore - a.matchScore);
          };

          const getMatchColor = (score) => {
            if (score >= 80) return 'text-green-600 bg-green-100';
            if (score >= 60) return 'text-yellow-600 bg-yellow-100';
            return 'text-red-600 bg-red-100';
          };

          const calculateCommissionSummary = () => {
            const userTransactions = transactions.filter(t => t.deal_id);
            const totalCommission = userTransactions.reduce((sum, t) => sum + t.total_commission, 0);
            const completedTransactions = userTransactions.filter(t => t.status === 'completed');
            const totalVolume = userTransactions.reduce((sum, t) => sum + t.transaction_amount, 0);
            
            return {
              totalCommission,
              completedTransactions: completedTransactions.length,
              pendingTransactions: userTransactions.length - completedTransactions.length,
              totalVolume
            };
          };

          // Auth Form Component
          const AuthForm = () => {
            const [formData, setFormData] = useState({
              email: '',
              password: '',
              name: '',
              company: ''
            });

            const handleSubmit = (e) => {
              e.preventDefault();
              if (authMode === 'login') {
                handleLogin(formData);
              }
            };

            const handleDemoLogin = (email, password) => {
              handleLogin({ email, password });
            };

            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
                <div className="max-w-md w-full bg-white rounded-xl shadow-lg p-8">
                  <div className="text-center mb-8">
                    <h1 className="text-3xl font-bold text-gray-900 mb-2">🏠 Vastgoed Matcher Pro</h1>
                    <p className="text-gray-600">
                      {authMode === 'login' ? 'Inloggen op je account' : 'Nieuw account aanmaken'}
                    </p>
                  </div>

                  <div className="mb-6 p-4 bg-green-50 rounded-lg border border-green-200">
                    <h4 className="font-semibold text-green-800 mb-2">⚡ Snelle Toegang</h4>
                    <div className="space-y-2">
                      <button
                        type="button"
                        onClick={() => handleDemoLogin('admin@vastgoed.nl', 'admin123')}
                        className="w-full text-left p-3 bg-white rounded border border-green-300 hover:bg-green-50 text-sm font-medium"
                      >
                        👑 Admin Login
                      </button>
                      <button
                        type="button" 
                        onClick={() => handleDemoLogin('test@test.nl', 'test')}
                        className="w-full text-left p-3 bg-white rounded border border-green-300 hover:bg-green-50 text-sm font-medium"
                      >
                        👤 Test Login
                      </button>
                    </div>
                  </div>

                  <form onSubmit={handleSubmit} className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Email</label>
                      <input
                        type="email"
                        value={formData.email}
                        onChange={(e) => setFormData({...formData, email: e.target.value})}
                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Wachtwoord</label>
                      <input
                        type="password"
                        value={formData.password}
                        onChange={(e) => setFormData({...formData, password: e.target.value})}
                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        required
                      />
                    </div>
                    <button
                      type="submit"
                      className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium"
                    >
                      Inloggen
                    </button>
                  </form>
                </div>
              </div>
            );
          };

          // Dashboard Component
          const Dashboard = () => {
            const commissionSummary = calculateCommissionSummary();
            const userInvestors = investors.filter(i => i.owner_id === user.id);
            const userDeals = deals.filter(d => d.owner_id === user.id);

            return (
              <div>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                  <div className="bg-white p-6 rounded-lg shadow-md border">
                    <div className="flex items-center justify-between">
                      <div>
                        <p className="text-sm font-medium text-gray-600">Mijn Investeerders</p>
                        <p className="text-2xl font-bold text-gray-900">{userInvestors.length}</p>
                      </div>
                      <UsersIcon className="h-8 w-8 text-blue-600" />
                    </div>
                  </div>
                  
                  <div className="bg-white p-6 rounded-lg shadow-md border">
                    <div className="flex items-center justify-between">
                      <div>
                        <p className="text-sm font-medium text-gray-600">Mijn Deals</p>
                        <p className="text-2xl font-bold text-gray-900">{userDeals.length}</p>
                      </div>
                      <BuildingIcon className="h-8 w-8 text-green-600" />
                    </div>
                  </div>
                  
                  <div className="bg-white p-6 rounded-lg shadow-md border">
                    <div className="flex items-center justify-between">
                      <div>
                        <p className="text-sm font-medium text-gray-600">Totale Commissie</p>
                        <p className="text-2xl font-bold text-gray-900">€{commissionSummary.totalCommission.toLocaleString()}</p>
                      </div>
                      <DollarSignIcon className="h-8 w-8 text-purple-600" />
                    </div>
                  </div>
                  
                  <div className="bg-white p-6 rounded-lg shadow-md border">
                    <div className="flex items-center justify-between">
                      <div>
                        <p className="text-sm font-medium text-gray-600">Transactie Volume</p>
                        <p className="text-2xl font-bold text-gray-900">€{(commissionSummary.totalVolume / 1000000).toFixed(1)}M</p>
                      </div>
                      <TrendingUpIcon className="h-8 w-8 text-orange-600" />
                    </div>
                  </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  <div className="bg-white rounded-lg shadow-md p-6 border">
                    <h3 className="text-lg font-semibold mb-4">Recente Transacties</h3>
                    <div className="space-y-3">
                      {transactions.slice(0, 5).map(transaction => {
                        const deal = deals.find(d => d.id === transaction.deal_id);
                        const investor = investors.find(i => i.id === transaction.investor_id);
                        
                        return (
                          <div key={transaction.id} className="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <div>
                              <p className="font-medium">{deal?.titel || 'Onbekende Deal'}</p>
                              <p className="text-sm text-gray-600">{investor?.naam || 'Onbekende Investeerder'}</p>
                            </div>
                            <div className="text-right">
                              <p className="font-medium">€{transaction.transaction_amount.toLocaleString()}</p>
                              <p className="text-sm text-green-600">+€{transaction.total_commission.toLocaleString()}</p>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>

                  <div className="bg-white rounded-lg shadow-md p-6 border">
                    <h3 className="text-lg font-semibold mb-4">Team Leden</h3>
                    <div className="space-y-3">
                      {users.map(userItem => {
                        const userInvestorCount = investors.filter(i => i.owner_id === userItem.id).length;
                        const userDealCount = deals.filter(d => d.owner_id === userItem.id).length;
                        return (
                          <div key={userItem.id} className="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <div className="flex items-center space-x-3">
                              <UserCheckIcon className="h-5 w-5 text-blue-600" />
                              <div>
                                <p className="font-medium">{userItem.name}</p>
                                <p className="text-sm text-gray-600">{userItem.company}</p>
                              </div>
                            </div>
                            <div className="text-right">
                              <p className="text-sm">{userInvestorCount} investeerders</p>
                              <p className="text-sm">{userDealCount} deals</p>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>
              </div>
            );
          };

          // Show auth form if not logged in
          if (showAuth || !user) {
            return React.createElement(AuthForm);
          }

          // Main app render
          return (
            <div className="max-w-7xl mx-auto p-6">
              <div className="mb-8 flex flex-col lg:flex-row justify-between items-start lg:items-center">
                <div>
                  <h1 className="text-3xl font-bold text-gray-900 mb-2">Vastgoed Matcher Pro AI</h1>
                  <p className="text-gray-600 mb-3">Welkom terug, {user.name}!</p>
                  <div className="flex flex-wrap items-center space-x-2">
                    <span className="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">🤖 AI-Enhanced</span>
                    <span className="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">📍 Regio Matching</span>
                    <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">💰 Smart Commissies</span>
                  </div>
                </div>
                <div className="flex items-center space-x-4 mt-4 lg:mt-0">
                  <div className="flex items-center space-x-2 text-gray-600">
                    <UserIcon size={16} />
                    <span>{user.company}</span>
                  </div>
                  <button
                    onClick={handleLogout}
                    className="flex items-center space-x-2 text-gray-600 hover:text-red-600 transition-colors"
                  >
                    <LogOutIcon size={16} />
                    <span>Uitloggen</span>
                  </button>
                </div>
              </div>

              <div className="flex space-x-2 mb-6 overflow-x-auto pb-2">
                <button
                  onClick={() => setActiveTab('dashboard')}
                  className={`px-4 py-2 rounded-lg flex items-center space-x-2 whitespace-nowrap transition-colors ${
                    activeTab === 'dashboard' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }`}
                >
                  <TrendingUpIcon size={20} />
                  <span>Dashboard</span>
                </button>
                <button
                  onClick={() => setActiveTab('investors')}
                  className={`px-4 py-2 rounded-lg flex items-center space-x-2 whitespace-nowrap transition-colors ${
                    activeTab === 'investors' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }`}
                >
                  <UsersIcon size={20} />
                  <span>Investeerders ({investors.length})</span>
                </button>
                <button
                  onClick={() => setActiveTab('deals')}
                  className={`px-4 py-2 rounded-lg flex items-center space-x-2 whitespace-nowrap transition-colors ${
                    activeTab === 'deals' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }`}
                >
                  <BuildingIcon size={20} />
                  <span>Deals ({deals.length})</span>
                </button>
                <button
                  onClick={() => setActiveTab('matching')}
                  className={`px-4 py-2 rounded-lg flex items-center space-x-2 whitespace-nowrap transition-colors ${
                    activeTab === 'matching' ? 'bg-purple-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }`}
                >
                  <StarIcon size={20} />
                  <span>AI Matching</span>
                </button>
              </div>

              {activeTab === 'dashboard' && React.createElement(Dashboard)}

              {activeTab === 'investors' && (
                <div>
                  <div className="flex justify-between items-center mb-6">
                    <h2 className="text-2xl font-bold">Investeerders</h2>
                    <button
                      onClick={() => setShowAddInvestor(true)}
                      className="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-blue-700 transition-colors"
                    >
                      <PlusIcon size={20} />
                      <span>Nieuwe Investeerder</span>
                    </button>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {investors.map(investor => (
                      <div key={investor.id} className="bg-white rounded-lg shadow-md p-6 border hover:shadow-lg transition-shadow">
                        <div className="flex items-center justify-between mb-4">
                          <h3 className="text-xl font-semibold text-gray-900">{investor.naam}</h3>
                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                            investor.risicoprofiel === 'Conservatief' ? 'bg-green-100 text-green-800' :
                            investor.risicoprofiel === 'Gemiddeld' ? 'bg-yellow-100 text-yellow-800' :
                            'bg-red-100 text-red-800'
                          }`}>
                            {investor.risicoprofiel}
                          </span>
                        </div>

                        <div className="space-y-2 text-sm mb-4">
                          <div className="flex items-center space-x-2">
                            <MailIcon size={16} className="text-gray-500" />
                            <span>{investor.email}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <PhoneIcon size={16} className="text-gray-500" />
                            <span>{investor.telefoon}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <EuroIcon size={16} className="text-gray-500" />
                            <span>€{investor.minBudget.toLocaleString()} - €{investor.maxBudget.toLocaleString()}</span>
                          </div>
                        </div>

                        <div className="mt-4">
                          <p className="text-sm text-gray-600 mb-2">Interessegebieden:</p>
                          <div className="flex flex-wrap gap-1">
                            {investor.vastgoedTypes.slice(0, 3).map(type => (
                              <span key={type} className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                {type}
                              </span>
                            ))}
                          </div>
                        </div>

                        <div className="mt-4 pt-4 border-t">
                          <button
                            onClick={() => getInvestorInsights(investor.id)}
                            disabled={isLoadingAI}
                            className="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2"
                          >
                            <BrainIcon size={16} />
                            <span>{isLoadingAI ? 'AI Analyseert...' : 'AI Analyse'}</span>
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {activeTab === 'deals' && (
                <div>
                  <div className="flex justify-between items-center mb-6">
                    <h2 className="text-2xl font-bold">Deals</h2>
                    <button
                      onClick={() => setShowAddDeal(true)}
                      className="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-blue-700 transition-colors"
                    >
                      <PlusIcon size={20} />
                      <span>Nieuwe Deal</span>
                    </button>
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {deals.map(deal => (
                      <div key={deal.id} className="bg-white rounded-lg shadow-md p-6 border hover:shadow-lg transition-shadow">
                        <div className="flex items-center justify-between mb-4">
                          <h3 className="text-xl font-semibold text-gray-900">{deal.titel}</h3>
                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                            deal.risico === 'Laag' ? 'bg-green-100 text-green-800' :
                            deal.risico === 'Gemiddeld' ? 'bg-yellow-100 text-yellow-800' :
                            'bg-red-100 text-red-800'
                          }`}>
                            {deal.risico} risico
                          </span>
                        </div>

                        <div className="space-y-2 text-sm mb-4">
                          <div className="flex items-center space-x-2">
                            <MapPinIcon size={16} className="text-gray-500" />
                            <span>{deal.locatie}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <BuildingIcon size={16} className="text-gray-500" />
                            <span>{deal.type}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <TargetIcon size={16} className="text-gray-500" />
                            <span>{deal.projectType}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <EuroIcon size={16} className="text-gray-500" />
                            <span className="font-semibold">€{deal.prijs.toLocaleString()}</span>
                          </div>
                          <div className="flex items-center space-x-2">
                            <TrendingUpIcon size={16} className="text-gray-500" />
                            <span className="font-semibold text-green-600">{deal.verwachtRendement}% rendement</span>
                          </div>
                        </div>

                        <p className="text-sm text-gray-600 mb-4">{deal.beschrijving}</p>

                        <div className="space-y-2">
                          <button
                            onClick={() => {
                              setMatches(findMatches(deal.id));
                              setActiveTab('matching');
                            }}
                            className="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2"
                          >
                            <StarIcon size={16} />
                            <span>Vind Matches</span>
                          </button>
                          <button
                            onClick={() => getDealInsights(deal.id)}
                            disabled={isLoadingAI}
                            className="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2"
                          >
                            <BrainIcon size={16} />
                            <span>{isLoadingAI ? 'AI Analyseert...' : 'AI Analyse'}</span>
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {activeTab === 'matching' && (
                <div>
                  <h2 className="text-2xl font-bold mb-4">AI-Powered Matching</h2>
                  
                  {matches.length === 0 ? (
                    <div className="text-center py-12">
                      <AlertCircleIcon size={48} className="text-gray-400 mx-auto mb-4" />
                      <p className="text-gray-600 text-lg">Selecteer een deal om AI-powered matches te vinden</p>
                    </div>
                  ) : (
                    <div className="space-y-6">
                      {matches.map((match, index) => (
                        <div key={match.investor.id} className="bg-white rounded-lg shadow-md p-6 border">
                          <div className="flex items-center justify-between mb-4">
                            <div className="flex items-center space-x-4">
                              <span className="text-2xl font-bold text-blue-600">#{index + 1}</span>
                              <div>
                                <h3 className="text-xl font-semibold">{match.investor.naam}</h3>
                                <p className="text-sm text-gray-600">{match.investor.bedrijf}</p>
                              </div>
                            </div>
                            <span className={`px-4 py-2 rounded-full text-lg font-bold ${getMatchColor(match.matchScore)}`}>
                              {match.matchScore}% match
                            </span>
                          </div>

                          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                              <h4 className="font-semibold mb-3">Investeerder Details:</h4>
                              <div className="space-y-2 text-sm">
                                <p>Budget: €{match.investor.minBudget.toLocaleString()} - €{match.investor.maxBudget.toLocaleString()}</p>
                                <p>Gewenst rendement: {match.investor.gewenstRendement}%</p>
                                <p>Risicoprofiel: {match.investor.risicoprofiel}</p>
                                <p>Ervaring: {match.investor.ervaringLevel}</p>
                              </div>
                            </div>
                            <div>
                              <h4 className="font-semibold mb-3">Deal Details:</h4>
                              <div className="space-y-2 text-sm">
                                <p>Locatie: {match.deal.locatie}</p>
                                <p>Type: {match.deal.type}</p>
                                <p>Prijs: €{match.deal.prijs.toLocaleString()}</p>
                                <p>Verwacht rendement: {match.deal.verwachtRendement}%</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              )}

              {Object.keys(aiInsights).length > 0 && (
                <div className="fixed bottom-4 right-4 max-w-md bg-white rounded-lg shadow-lg border p-4 z-40">
                  <div className="flex justify-between items-center mb-2">
                    <h4 className="font-semibold flex items-center space-x-2">
                      <BrainIcon size={16} />
                      <span>AI Insights</span>
                    </h4>
                    <button
                      onClick={() => setAiInsights({})}
                      className="text-gray-400 hover:text-gray-600"
                    >
                      ✕
                    </button>
                  </div>
                  <div className="text-sm space-y-2">
                    {Object.entries(aiInsights).slice(-1).map(([key, insight]) => (
                      <div key={key}>
                        <p className="font-medium">AI Analyse:</p>
                        <p className="text-xs text-gray-600">{insight.recommendations}</p>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          );
        };

        // Initialize the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(VastgoedInvesteerderMatcher));

        console.log('🚀 Vastgoed Matcher Pro AI geladen - Stable versie');
        console.log('✅ Alle React errors opgelost');
        console.log('🔑 Demo login: admin@vastgoed.nl / admin123');
    </script>
</body>
</html>
